{
  "mappings": [
    {
      "request": {
        "method": "GET",
        "urlPath": "/sts",
        "queryParameters": {
          "grant_type": {
            "equalTo": "client_credentials"
          },
          "scope": {
            "equalTo": "openid"
          }
        },
        "headers" : {
          "Authorization" : {
            "matches" : "Basic .*"
          }
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": "{\"access_token\" : \"eyxXxx\", \"token_type\" : \"Bearer\", \"expires_in\" : \"3600\"}"
      }
    },
    {
      "request": {
        "method": "POST",
        "urlPath": "/sts"
      },
      "response": {
        "status": 200,
        "body": " <s:Envelope xmlns:a=\"http://www.w3.org/2005/08/addressing\" xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\">   <s:Header>     <a:Action s:mustUnderstand=\"1\">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTRC/IssueFinal</a:Action>     <ActivityId CorrelationId=\"f1d13f52-af2c-46dd-9f73-67b68ef08543\" xmlns=\"http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics\">00d96a84-2caa-45bb-bbb1-e843e2197471</ActivityId>   </s:Header>   <s:Body>     <trust:RequestSecurityTokenResponseCollection xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\">       <trust:RequestSecurityTokenResponse>         <trust:Lifetime>           <wsu:Created xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">2010-01-28T00:19:34.264Z</wsu:Created>           <wsu:Expires xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">2010-01-28T10:19:34.264Z</wsu:Expires>         </trust:Lifetime>         <wsp:AppliesTo xmlns:wsp=\"http://schemas.xmlsoap.org/ws/2004/09/policy\">           <a:EndpointReference>             <a:Address>http://server.example.com/</a:Address>           </a:EndpointReference>         </wsp:AppliesTo>         <trust:RequestedSecurityToken>           <saml:Assertion MajorVersion=\"1\" MinorVersion=\"1\" AssertionID=\"_40e2d2b1-6da1-46bc-9a2c-769c03d21d32\" Issuer=\"SharePoint\" IssueInstant=\"2010-01-28T00:19:34.315Z\" xmlns:saml=\"urn:oasis:names:tc:SAML:1.0:assertion\">             <saml:Conditions NotBefore=\"2010-01-28T00:19:34.264Z\" NotOnOrAfter=\"2010-01-28T10:19:34.264Z\">               <saml:AudienceRestrictionCondition>                 <saml:Audience>http://server.example.com/</saml:Audience>               </saml:AudienceRestrictionCondition>             </saml:Conditions>             <saml:AttributeStatement>               <saml:Subject>                 <saml:NameIdentifier>user1</saml:NameIdentifier>                 <saml:SubjectConfirmation>                    <saml:ConfirmationMethod>urn:oasis:names:tc:SAML:1.0:cm:bearer</saml:ConfirmationMethod>                 </saml:SubjectConfirmation>               </saml:Subject>               <saml:Attribute AttributeName=\"role\" AttributeNamespace=\"http://schemas.microsoft.com/ws/2008/06/identity/claims\" a:OriginalIssuer=\"Forms:LDAPRoleProvider\" xmlns:a=\"http://schemas.xmlsoap.org/ws/2009/09/identity/claims\">                 <saml:AttributeValue>USERS</saml:AttributeValue>                 <saml:AttributeValue>EXAMPLE-ROLE-RW</saml:AttributeValue>               </saml:Attribute>               <saml:Attribute AttributeName=\"userlogonname\" AttributeNamespace=\"http://schemas.microsoft.com/sharepoint/2009/08/claims\" a:OriginalIssuer=\"Forms:LDAPMembershipProvider\" xmlns:a=\"http://schemas.xmlsoap.org/ws/2009/09/identity/claims\">                 <saml:AttributeValue>user1</saml:AttributeValue>             </saml:Attribute>             <saml:Attribute AttributeName=\"userid\" AttributeNamespace=\"http://schemas.microsoft.com/sharepoint/2009/08/claims\" a:OriginalIssuer=\"SecurityTokenService\" xmlns:a=\"http://schemas.xmlsoap.org/ws/2009/09/identity/claims\">              <saml:AttributeValue>0#.f|ldapmembershipprovider|user1</saml:AttributeValue>             </saml:Attribute>             <saml:Attribute AttributeName=\"name\" AttributeNamespace=\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims\" a:OriginalIssuer=\"SecurityTokenService\" xmlns:a=\"http://schemas.xmlsoap.org/ws/2009/09/identity/claims\">             <saml:AttributeValue>0#.f|ldapmembershipprovider|user1</saml:AttributeValue>             </saml:Attribute>             <saml:Attribute AttributeName=\"identityprovider\" AttributeNamespace=\"http://schemas.microsoft.com/sharepoint/2009/08/claims\" a:OriginalIssuer=\"SecurityTokenService\" xmlns:a=\"http://schemas.xmlsoap.org/ws/2009/09/identity/claims\">               <saml:AttributeValue>forms:LDAPMembershipProvider</saml:AttributeValue>             </saml:Attribute>             <saml:Attribute AttributeName=\"isauthenticated\" AttributeNamespace=\"http://sharepoint.microsoft.com/claims/2009/08\" a:OriginalIssuer=\"SecurityTokenService\" xmlns:a=\"http://schemas.xmlsoap.org/ws/2009/09/identity/claims\">               <saml:AttributeValue>True</saml:AttributeValue>             </saml:Attribute>             <saml:Attribute AttributeName=\"farmid\" AttributeNamespace=\"http://schemas.microsoft.com/sharepoint/2009/08/claims\" a:OriginalIssuer=\"ClaimProvider:System\" xmlns:a=\"http://schemas.xmlsoap.org/ws/2009/09/identity/claims\">               <saml:AttributeValue>568e7577-e4e6-4bb1-a8d8-7058ac50f5aa</saml:AttributeValue>             </saml:Attribute>             <saml:Attribute AttributeName=\"tokenreference\" AttributeNamespace=\"http://sharepoint.microsoft.com/claims/2009/08\">               <saml:AttributeValue>0#.f|ldapmembershipprovider|user1,129091475742945006,JpbKq4NnifCahSpPqxnMzMO++E0cG0QWt4rLDDh/Ig2oR+gFN8hqQ5oB1nI7NW9kz5EVoQAF6AzPx2D8WcPOPhg+Y0iRUG0lfwAZ5KRPAFjT5ZHdl15RyvEOBqGjJ9/Odiic8MrgU5SqThWRB5+y/6lXUuhRE9Qpei4PkVNKsAfzYojTojxRaZ4lUaG0OMY1uo/PiYJpmvyuRuDPov5DHZqBoq4fObUomGpZTIHP/9Prh7U0QJkjCaHdzjps6aNPUnMJr3LDH44myTsOiLc7PYhWFD/Zay4yBpFWrMzXzvxmAt0ABdyTfNDlGtHzfMe2m8VFteYIds9uTJ25sv9S0Q==,http://server.example.com/</saml:AttributeValue>             </saml:Attribute>           </saml:AttributeStatement> <saml:AuthenticationStatement AuthenticationMethod=\"urn:federation:authentication:password\" AuthenticationInstant=\"2010-01-28T00:19:34.315Z\">             <saml:Subject>               <saml:NameIdentifier>domain\\user1</saml:NameIdentifier>               <saml:SubjectConfirmation>                 <saml:ConfirmationMethod>urn:oasis:names:tc:SAML:1.0:cm:bearer</saml:ConfirmationMethod>               </saml:SubjectConfirmation>             </saml:Subject>           </saml:AuthenticationStatement>             <ds:Signature xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\">             <ds:SignedInfo>               <ds:CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"></ds:CanonicalizationMethod>               <ds:SignatureMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256\"></ds:SignatureMethod>               <ds:Reference URI=\"#_40e2d2b1-6da1-46bc-9a2c-769c03d21d32\">                 <ds:Transforms>                   <ds:Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\"></ds:Transform>                   <ds:Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"></ds:Transform>                 </ds:Transforms>                 <ds:DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#sha256\"></ds:DigestMethod>                 <ds:DigestValue>CtNDDf6s4vSMxJBr7EhBxFrtX+yqm2lhySRxziOf7z8=</ds:DigestValue>               </ds:Reference>             </ds:SignedInfo>             <ds:SignatureValue>WvLnpnvqmc1z3ldNaT39wZCOAqtiWiQo/CvAWkYARcf1l8/WqY17gEaxsf9AppywD7h5dCb/cdES2Jex8llnUXdePZnGodz3Sa9uFAPnYfsfPmdpvJNtmDSaTiKF4dsWPUbKQeOK/yAy3Q6mgU4OTKjIGdwRNrPl3r+czrIgg/GWqK4Xf31U42N4iwiMt9CaITxeNY9idYCB0qnp6d9ELB0LhLP1jP47TIk2lDbsRM5unjFLcTRHu+6eL2aqn5p7OpqSl9O49SLT/I4g9Mn0fgxoH8E8KHvEgziOh8loFjnlj6O/woUGwGYDdWgURKN5V5hgmpFKLb4W1e3Ej9toSg==</ds:SignatureValue>             <KeyInfo xmlns=\"http://www.w3.org/2000/09/xmldsig#\">               <X509Data>                 <X509Certificate>MIIERjCCAi6gAwIBAgIQ+BzA2uDkYKBI8psCB32xXTANBgkqhkiG9w0BAQUFADBaMQswCQYDVQQGEwJVUzESMBAGA1UEChMJTWljcm9zb2Z0MRMwEQYDVQQLEwpTaGFyZVBvaW50MSIwIAYDVQQDExlTaGFyZVBvaW50IFJvb3QgQXV0aG9yaXR5MCAXDTEwMDEyNDE5MDYwN1oYDzk5OTkwMTAxMDAwMDAwWjBiMQswCQYDVQQGEwJVUzESMBAGA1UEChMJTWljcm9zb2Z0MRMwEQYDVQQLEwpTaGFyZVBvaW50MSowKAYDVQQDEyFTaGFyZVBvaW50IFNlY3VyaXR5IFRva2VuIFNlcnZpY2UwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCeKuBBZa5n3RI1wCy4nLgFURUB88TI2MvGBbKvRtSXGWjKMcmf0W/LS2OykTtUZXdyJqZ2iC/mHBevdWiimh+5Js9I5LSAMILzqpEinLXzIKW7M1sM2rB8QYqvK49lqBmpD66hsHAdgsGO//ybBv/tmpyIIfSsKLcYJWyu+NbPAB7fUtnPugAolNk3Trv7zeJ8SnTi/xThaR7UJa5plTsB2CxFQo9Yy9MN/nZ0KGFsipFZAwcKtH5wnkh2n6tz3pJ73ZIpmuawnc0JJhHghffBpPb/aqq8ltXuvZdap+zMLyh7bcegZXK24fgComH8KiSn9N2OkUjWgcTdC7t77e5zAgMBAAEwDQYJKoZIhvcNAQEFBQADggIBAEHVCVBUjwbbTXfCnQ8Qe4eldfCisQJfg1t/HjO/H1d0iF42bYv+DcfHMwYr6XPDNTx/nAdO2EfA6VUueTzy1vGynPgT0eLCUAA11X332wH9XVvMvgdW2d5b7O/rNy3Yoew/p9S4nwboqgiuNk7rjHAyNtE7KXZyqT7kcwRCb1UmPgP+vxhRGJucfw7/hrn02bBkHRtB01jsH+LBotpZz0roA4PIxOySpPhAvIzM1ApyfjY+pfkWyYk67c4Yf+KWwcGy6JDOwTaaflpyEM2NAWLNSjnba720efV14TMHZM1ArGcUVAfh0++0XyceReDRcwW1isgpRlQJrtzYEDgPDNSmrq3vBFPzNlF8pvSYNPaXAfD4fiWRI5QkX5JUWOQC3xyEqV67OMnFXBuDZiCR2QFwoQEcVR344quRPx+5bQUj35jdPBjwZFexL1YtJg8KOs5BCD87eMfc68NM9CL2QqZHvfwOyO5iAWfGbYsGxuQqXhLNq5tMgJTFnu6UUZHSLgQwWOFHopu7QJFz0TAK9x4JC+KwbFGKC067x3Xl96NUf3e8WAVweUQwAPGnY+eUtZsBI/ltCzCTLd/9RSISSR3wKqEz5jS7jAdfrGNUytlSmG0PXroz9wf0SIjZPovFevucg3BzvjoVRPI8T9ldRV4pQWGhh0EC37SwWTjl7XbM</X509Certificate>               </X509Data>             </KeyInfo>           </ds:Signature>         </saml:Assertion>       </trust:RequestedSecurityToken>       <trust:RequestedAttachedReference>         <o:SecurityTokenReference xmlns:o=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\">           <o:KeyIdentifier ValueType=\"http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.0#SAMLAssertionID\">_40e2d2b1-6da1-46bc-9a2c-769c03d21d32</o:KeyIdentifier>         </o:SecurityTokenReference>       </trust:RequestedAttachedReference>       <trust:RequestedUnattachedReference>         <o:SecurityTokenReference xmlns:o=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\">           <o:KeyIdentifier ValueType=\"http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.0#SAMLAssertionID\">_40e2d2b1-6da1-46bc-9a2c-769c03d21d32</o:KeyIdentifier>           </o:SecurityTokenReference>         </trust:RequestedUnattachedReference>         <trust:TokenType>urn:oasis:names:tc:SAML:1.0:assertion</trust:TokenType>         <trust:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</trust:RequestType>         <trust:KeyType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Bearer</trust:KeyType>       </trust:RequestSecurityTokenResponse>     </trust:RequestSecurityTokenResponseCollection>   </s:Body> </s:Envelope>",
        "headers": {
          "Content-Type": "application/soap+xml"
        }
      }
    }
  ]
}