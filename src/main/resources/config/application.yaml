server.servlet.context-path: /tiltaksgjennomforing-api

management.endpoints.web:
  exposure.include: info, health, metrics, prometheus
  base-path: /internal/actuator

spring:
  cache:
    type: caffeine
  jpa:
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
  application:
    name: tiltaksgjennomforing-api
  main:
    banner-mode: "off"
  jmx:
    enabled: false
  kafka:
    bootstrap-servers: ${KAFKA_BROKERS}
    producer:
      ssl:
        protocol: SSL
        trust-store-type: JKS
        trust-store-location: ${KAFKA_TRUSTSTORE_PATH}
        trust-store-password: ${KAFKA_CREDSTORE_PASSWORD}
        key-store-type: PKCS12
        key-store-location: ${KAFKA_KEYSTORE_PATH}
        key-store-password: ${KAFKA_CREDSTORE_PASSWORD}
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.apache.kafka.common.serialization.StringSerializer
    consumer:
      auto-offset-reset: earliest
      enable-auto-commit: false
      properties:
        spring:
          json:
            trusted:
              packages: "*"
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      group-id: ${spring.application.name}

tiltaksgjennomforing:
  beslutter-ad-gruppe:
    id: ${beslutter.ad.gruppe}
  kafka:
    enabled: true
  dokgen:
    uri: http://tiltak-dokgen.arbeidsgiver.svc.nais.local/template/tiltak-avtale/create-pdf
  notifikasjoner:
    uri: https://ag-notifikasjon-produsent-api.dev.intern.nav.no/api/graphql
    lenke: https://arbeidsgiver.nav.no/tiltaksgjennomforing/avtale/
  dvh-melding:
    fixed-delay: 120
  avtale-hendelse-melding:
    fixed-delay: 120
  tilskuddsperioder:
    tiltakstyper: SOMMERJOBB,MIDLERTIDIG_LONNSTILSKUDD,VARIG_LONNSTILSKUDD
  salesforcekontorer:
    enheter: ${tiltaksgjennomforing.salesforce.enheter}

no.nav.security.jwt:
  client:
    registration:
      aad-graph:
        token-endpoint-url: https://login.microsoftonline.com/${AZURE_APP_TENANT_ID}/oauth2/v2.0/token
        grant-type: urn:ietf:params:oauth:grant-type:jwt-bearer
        scope: https://graph.microsoft.com/.default
        authentication:
          client-id: ${AZURE_APP_CLIENT_ID}
          client-secret: ${AZURE_APP_CLIENT_SECRET}
          client-auth-method: client_secret_basic
      aad:
        token-endpoint-url: https://login.microsoftonline.com/${AZURE_APP_TENANT_ID}/oauth2/v2.0/token
        grant-type: urn:ietf:params:oauth:grant-type:jwt-bearer
        authentication:
          client-id: ${AZURE_APP_CLIENT_ID}
          client-secret: ${AZURE_APP_CLIENT_SECRET}
          client-auth-method: client_secret_basic
      aad-anonym:
        token-endpoint-url: https://login.microsoftonline.com/${AZURE_APP_TENANT_ID}/oauth2/v2.0/token
        grant-type: client_credentials
        authentication:
          client-id: ${AZURE_APP_CLIENT_ID}
          client-secret: ${AZURE_APP_CLIENT_SECRET}
          client-auth-method: client_secret_basic

caches:
  caffeine:
    - name: pdl_cache
      expiryInMinutes: 60
      maximumSize: 1000
    - name: norgnavn_cache
      expiryInMinutes: 60
      maximumSize: 1000
    - name: norggeoenhet_cache
      expiryInMinutes: 60
      maximumSize: 1000
    - name: arena_cache
      expiryInMinutes: 60
      maximumSize: 1000
    - name: axsys_cache
      expiryInMinutes: 60
      maximumSize: 1000
